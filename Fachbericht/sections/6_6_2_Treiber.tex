\subsubsection{FOC-Treiber}
\label{subsubsec:Inbetriebnahme_FOC_Treiber}

Der FOC-Treiber wird über die SPI-Schnittstelle in Betrieb genommen. Dazu werden die Parameter verwendet, welche aus der TMCL-IDE verwendet werden. Die Standardparameter beinhalten Informationen zum Motor \todo{Kurz beschreiben, was die Register beinhalten}, zwei Sekunden Linksdrehung im Open-Loop, 2 Sekunden Rechtsdrehung im Open-Loop und dann Stop.

Die Initialisierung sowie das Auslesen gewisser Register ist mit der Testapplikation ''\textit{Motor}'' möglich. Auch die Initialisierung und Kommunikation mit den Gate-Treiber TMC6200 kann mit diesem getestet werden.

Vorgehen:
\begin{enumerate}
\item Benötigte Applikation aus dem Software-Ordner auf dem USB-Stick in Atmel Studio öffnen.\\
\textcolor{magenta}{Software\textrightarrow Atmega\textrightarrow 5\_Motor\textrightarrow Motor}\\

\item Software anpassen:\\
\textcolor{green}{
TMC4671\_init();\\
ggf. Pins, UART- und SPI-Schnittstelle\\
}
\item Software hochladen:\\
\textcolor{blue}{AtmelStudio\textrightarrow Tools\textrightarrow Cocktailmixer}\\

\item Ausgehende Gate-Signale zum Gate-Treiebr mit Oszilloskop überprüfen. Da das Resultat mit dem aus dem P5 übereinstimmt, gilt der FOC-Teil als in Betrieb genommen. Im Anhang Kapitel \ref{Appendix:TMC4671} sind die Messbilder eingefügt (Abbildungen \ref)

\todo{Bilder machen und einfügen mit Oszi.}
\end{enumerate}